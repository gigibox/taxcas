webpackJsonp([3],{"2/T4":function(e,t,a){"use strict";var s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticClass:"handle-box"},[a("el-form",{staticClass:"inlineform1",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"plus"},on:{click:e.out}},[e._v("批量导出")])],1)],1),e._v(" "),a("el-form",{staticClass:"inlineform2",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"请输入渠道名称或账号查找"},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.waitlistData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"编号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cert_name",label:"申请证书",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wechatID",label:"微信ID",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"申请人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cardID",label:"身份证号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"申请时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"money",label:"支付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"申请状态"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,layout:"prev, pager, next","page-size":10,total:e.pageTotal},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var r=a("C7Lr")({data:function(){return{radio:"all",loading:!1,searchWord:"",currentPage:1,pageTotal:0,waitlistData:[]}},created:function(){},methods:{getData:function(){var e=this;e.$axios.get(e.baseUrl+"/api/v1/admin/certs").then(function(t){e.waitlistData=t.data.data})},changeTab:function(){},out:function(){},search:function(){},handleCurrentChange:function(){}}},s,!1,function(e){a("WhwG")},"data-v-1df726f8",null);t.a=r.exports},BpG9:function(e,t){},Dq1k:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("2/T4"),r=(a("IcnI"),{components:{wExport:s.a},data:function(){return{radio:"export",loading:!1,searchWord:"",dialogImgVisible:!1,passedImg:"https://tax.caishuidai.com/api/export/image/cert1/20180901000004.png",passedCertName:"",currentPage:1,curPageSize:10,pageTotal:0,listData:[],allListData:[],curCertId:this.$route.query.cert_id,uploadUrl:this.baseUrl+"/api/v1/admin/excels",fileList:[],fileList2:[],personalIdList:[],msg:{certname:"无",name:"无",cardid:"无",date:"无",price:"无",status:"无"},showTable:!0}},computed:{},watch:{$route:function(){this.curCertId=this.$route.query.cert_id,this.radio="export",this.getData("export",this.currentPage,this.curPageSize)}},created:function(){this.curCertId=this.$route.query.cert_id,this.getData("export",this.currentPage,this.curPageSize)},methods:{getParams:function(){},getData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"export",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=this;s.$axios.get(s.baseUrl+"/api/v1/admin/applicants/certs/"+s.curCertId+"?page="+t+"&limit="+a+"&type="+e).then(function(e){e.data.success?(s.allListData=e.data.data.list,s.pageTotal=e.data.data.count):s.$message.error(e.data.msg)})},clickDetail:function(e,t,a,s,r,i){this.showTable=!1,this.msg.certname=e,this.msg.name=t,this.msg.cardid=a,this.msg.date=s,this.msg.price=r,this.msg.status=i},clickDetailImg:function(e,t,a){var s=this;s.passedCertName=t,s.$axios.get(s.baseUrl+"/api/v1/admin/images/certs/"+e+"/"+a).then(function(e){e.data.success?(s.passedImg=e.data.data.image_url,s.dialogImgVisible=!0):s.$message.error(e.data.msg)})},handleSelectionChange:function(e){var t=[];for(var a in e)t.push(e[a].personal_id);this.personalIdList=t},handleSizeChange:function(e){this.curPageSize=e,this.getData(this.curCertId,this.radio,this.currentPage,this.curPageSize)},handleCurrentChange:function(e){this.currentPage=e,this.getData(this.radio,this.currentPage,this.curPageSize)},changeTab:function(){this.showTable=!0,this.getData(this.radio)},outsExport:function(){var e=this;e.$confirm("是否批量导出全部“待导出”数据?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.get(e.baseUrl+"/api/v1/admin/files/applicants/certs/"+e.curCertId,{params:{type:"export"}}).then(function(t){t.data.success?(window.location.href=t.data.data.file_url,e.$message({message:"导出成功",type:"success"}),e.getData(e.radio,e.currentPage,e.curPageSize)):e.$message.error(t.data.msg)})}).catch(function(){})},sureReject:function(){var e=this;if(e.personalIdList.length<1)return e.$message({message:"请选择数据",type:"warning"}),!1;e.$axios.put(e.baseUrl+"/api/v1/admin/applicants/certs/"+e.curCertId,{action:"reject",pids:e.personalIdList}).then(function(t){t.data.success?(e.$message({message:"操作成功",type:"success"}),e.getData(e.radio,e.currentPage,e.curPageSize)):e.$message.error(t.data.msg)})},outsReject:function(){var e=this;e.$confirm("是否批量导出全部“已拒绝”数据?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.get(e.baseUrl+"/api/v1/admin/files/applicants/certs/"+e.curCertId,{params:{type:"export"}}).then(function(t){t.data.success?(window.location.href=t.data.data.file_url,e.$message({message:"导出成功",type:"success"})):e.$message.error(t.data.msg)})}).catch(function(){})},insReject:function(){},search:function(){},handleSuccessReject:function(e,t,a){if(e.success){var s=e.data.excel_save_path;this.getExcelResult("refunded",s)}else this.$message.error(e.data.msg)},handleSuccess:function(e,t,a){if(e.success){var s=e.data.excel_save_path;this.getExcelResult("passed",s)}else this.$message.error(e.data.msg)},getExcelResult:function(e,t){var a=this,s={action:e,file_path:t};a.$axios.put(a.baseUrl+"/api/v1/admin/applicants/certs/"+a.curCertId,s).then(function(e){e.data.success?(a.$message({message:"操作成功",type:"success"}),a.getData(a.radio,a.currentPage,a.curPageSize)):a.$message.error(e.data.msg)},function(e){a.$message.error(e.msg)})}}}),i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticClass:"rad-group radio-cont"},[a("el-radio-group",{on:{change:e.changeTab},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio-button",{attrs:{label:"export"}},[e._v("待导出")]),e._v(" "),a("el-radio-button",{attrs:{label:"verify"}},[e._v("审核中")]),e._v(" "),a("el-radio-button",{attrs:{label:"passed"}},[e._v("已通过")]),e._v(" "),a("el-radio-button",{attrs:{label:"reject"}},[e._v("已拒绝")])],1)],1),e._v(" "),a("div",[a("div",{staticClass:"handle-box"},[a("el-form",{staticClass:"inlineform1",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"export"==e.radio,expression:"radio == 'export'"}],staticClass:"handle-del mr10",attrs:{type:"primary",icon:"plus"},on:{click:e.outsExport}},[e._v("批量导出")]),e._v(" "),a("el-upload",{directives:[{name:"show",rawName:"v-show",value:"verify"==e.radio,expression:"radio == 'verify'"}],staticClass:"unload-mine",attrs:{type:"primary",action:e.uploadUrl,name:"excel","show-file-list":!1,"on-success":e.handleSuccess,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("批量导入")])],1),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"verify"==e.radio,expression:"radio == 'verify'"}],staticClass:"handle-del mr10",attrs:{type:"primary",icon:"plus"},on:{click:e.sureReject}},[e._v("确认拒绝")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"reject"==e.radio&&e.showTable,expression:"radio == 'reject' && showTable "}],staticClass:"handle-del mr10",attrs:{type:"primary",icon:"plus"},on:{click:e.outsReject}},[e._v("批量导出")]),e._v(" "),a("el-upload",{directives:[{name:"show",rawName:"v-show",value:"reject"==e.radio&&e.showTable,expression:"radio == 'reject' && showTable "}],staticClass:"unload-mine",attrs:{type:"primary",action:e.uploadUrl,name:"excel","show-file-list":!1,"on-success":e.handleSuccessReject,"file-list":e.fileList2}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("批量导入")])],1)],1)],1),e._v(" "),a("el-form",{staticClass:"inlineform2",staticStyle:{display:"none"},attrs:{inline:!0}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"请输入渠道名称或账号查找"},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}]},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:e.radio,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.allListData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"编号",width:"50"}}),e._v(" "),"verify"==e.radio?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"serial_number",label:"证书编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cert_name",label:"申请证书",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"申请人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"personal_id",label:"身份证号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"study_date",label:"申请时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pay_order",label:"支付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"apply_status_msg",label:"申请状态"}}),e._v(" "),"passed"==e.radio?a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.clickDetailImg(t.row.cert_id,t.row.cert_name,t.row.wechat_id)}}},[e._v("查看")])]}}])}):e._e(),e._v(" "),"reject"==e.radio?a("el-table-column",{attrs:{prop:"",label:"查看"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.clickDetail(t.row.cert_name,t.row.name,t.row.personal_id,t.row.study_date,t.row.pay_order,t.row.apply_status_msg)}}},[e._v("详情")])]}}])}):e._e()],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,layout:"sizes,prev, pager, next","page-sizes":[10,20,30,40],"page-size":e.curPageSize,total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showTable,expression:"!showTable"}],staticClass:"detail-cont"},[a("p",[e._v("退款详情")]),e._v(" "),a("ul",{staticClass:"detail-msg"},[a("li",[a("span",[e._v("申请证书：")]),e._v(" "),a("p",[e._v(e._s(e.msg.certname))])]),e._v(" "),a("li",[a("span",[e._v("申请人：")]),e._v(" "),a("p",[e._v(e._s(e.msg.name))])]),e._v(" "),a("li",[a("span",[e._v("身份证号：")]),e._v(" "),a("p",[e._v(e._s(e.msg.cardid))])]),e._v(" "),a("li",[a("span",[e._v("申请时间：")]),e._v(" "),a("p",[e._v(e._s(e.msg.date))])]),e._v(" "),a("li",[a("span",[e._v("支付金额：")]),e._v(" "),a("p",[e._v(e._s(e.msg.price||0))])]),e._v(" "),a("li",[a("span",[e._v("退款进度：")]),e._v(" "),a("p",[e._v(e._s(e.msg.status))])])])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"waitexport"==e.radio,expression:"radio == 'waitexport'"}]},[a("w-export")],1),e._v(" "),a("el-dialog",{attrs:{title:e.passedCertName,visible:e.dialogImgVisible,width:"30%","modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogImgVisible=t}}},[a("span",{staticClass:"dialog-img-cont"},[a("img",{attrs:{src:e.passedImg,alt:""}})]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})])],1)},staticRenderFns:[]};var l=a("C7Lr")(r,i,!1,function(e){a("BpG9")},"data-v-5a344dc5",null);t.default=l.exports},WhwG:function(e,t){}});
//# sourceMappingURL=3.c712e8f7fdae48052b24.js.map